<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Complete Web Development Bootcamp | Course</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <style>
        :root {
      --primary: #00bfa6;
      --bg: #f2f4f8;
      --card-bg: #ffffffcc;
      --text-muted: #6c757d;
      --shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
    }
    body {
      background-color: #f0f2f5;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .bg-primary { background: #00bfa6 !important; }
    .text-primary { color: #00bfa6 !important; }
    .container {
      max-width: 1140px;
    }

    .course-header,
    .course-info,
    .sidebar {
      background-color: #fff;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.03);
      margin-bottom: 20px;
    }

    .classes {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 50px;
    }

    .class-card {
    flex: 1 1 auto;
      background-color: #fff;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.03);
      cursor: pointer;
    }
    .class-card:hover {
        background: #9bcac4;
    }

    .profile-pic {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
    }

    .requirement-badge {
      background-color: #e3f9f6;
      color: var(--primary);
      padding: 6px 14px;
      border-radius: 20px;
      margin: 6px 6px 6px 0;
      font-size: 13px;
    }

    .social-icons a {
      font-size: 1.2rem;
    }

    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      font-weight: 500;
      margin-bottom: 20px;
      cursor: pointer;
    }

    .back-btn:hover {
      text-decoration: underline;
    }

    @media (max-width: 768px) {
      .profile-pic {
        width: 50px;
        height: 50px;
      }
    }
  </style>
</head>

<body>
  <div class="">
    <div class="back-btn text-primary bg-light w-100 p-2 shadow-sm position-sticky top-0 " onclick="history.back()">
      <i class="fas fa-arrow-left"></i> <strong class="code">Back</strong>
    </div>

    <div class="container">
            <div id="row" class="row"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const code = new URLSearchParams(location.search).get('code');

    document.querySelector('.code').textContent = code;
    async function getCourse() {
      const res = await fetch(`/api/course?code=${code}`);
      const course = await res.json();

      document.getElementById('row').innerHTML = `
      <div class="col-lg-4 mb-4">
                <!-- Course Details -->
        <div class="course-info">
          <h4 class="mb-3">${course.title}</h4>
          <p class="text-muted">${course.description}</p>
        </div>

                <!-- Instructor Info -->
        <div class="course-header d-flex align-items-center">
          <img src="${course.instructor.user.profile_pic}" alt="Profile" class="profile-pic me-3">
          <div>
            <h5 class="mb-1">${course.instructor.user.first_name} ${course.instructor.user.last_name} 
              <small class="text-muted">@${course.instructor.user.username}</small>
            </h5>
            <p class="mb-0 text-muted">
              Instructor from ${course.instructor.location} | Rating: ${course.instructor.rating} ‚≠ê
            </p>
            <div class="mt-1">
              <a href="${course.instructor.portfolioUrl}" class="text-decoration-none small text-primary" target="_blank">View Portfolio</a>
            </div>
            
          <div class="d-flex gap-3 mb-2 social-icons flex-wrap">
            <a href="${course.instructor.user.facebook}" target="_blank"><i class="fab fa-facebook text-primary"></i></a>
            <a href="${course.instructor.user.twitter}" target="_blank"><i class="fab fa-twitter text-info"></i></a>
            <a href="${course.instructor.user.instagram}" target="_blank"><i class="fab fa-instagram text-danger"></i></a>
            <a href="${course.instructor.user.linkedin}" target="_blank"><i class="fab fa-linkedin text-primary"></i></a>
            <a href="${course.instructor.user.tiktok}" target="_blank"><i class="fab fa-tiktok text-dark"></i></a>
            <a href="${course.instructor.user.youtube}" target="_blank"><i class="fab fa-youtube text-danger"></i></a>
          </div>
          </div>
        </div>
      </div>

      <div class="col-lg-8">

        <div class="sidebar">
          <h5 class="mb-3">Course Overview</h5>
          <p><strong>Code:</strong> ${course.courseCode}</p>
          <p><strong>Category:</strong> ${course.category.name}</p>
          <p><strong>Price:</strong> $${course.price}</p>
          <p><strong>Enrollments:</strong> ${course.enrollments}</p>
          <p><strong>Status:</strong>
            ${course.approved ? '<span class="badge bg-success">Approved</span>' : ''}
            ${course.verified ? '<span class="badge bg-info text-dark">Verified</span>' : ''}
          </p>
          <hr />
          <h6>Requirements</h6>
          <div class="d-flex flex-wrap">
            ${(course.requirements || []).map(r => `<span class="requirement-badge">${r}</span>`).join('')}
          </div>
        </div>
      </div>

      <div>
                <!-- Classes -->
        <h5 class="mb-3">Classes (${course.classes.length})</h5>
        <div class="classes">
        ${course.classes.map(c => `
  <a href="/class?id=${c.id}" class="text-decoration-none class-card text-black">
          <div class="">
            <h6>${c.name}</h6>
            <p class="mb-1 text-muted">Duration: ${c.duration} mins</p>
            <p class="mb-0 text-primary"><strong> $${c.price}</strong></p>
          </div></a>
        `).join('')}
        </div>
      </div>
      `;
    }

    getCourse();
  </script>
</body>

</html>
